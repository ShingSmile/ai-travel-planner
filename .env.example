# 应用基础配置
NODE_ENV=development
PORT=3000

# Supabase 配置（默认使用 Supabase 本地开发端口）
SUPABASE_URL=http://127.0.0.1:54321
SUPABASE_SERVICE_ROLE_KEY=service-role-key
NEXT_PUBLIC_SUPABASE_URL=http://127.0.0.1:54321
NEXT_PUBLIC_SUPABASE_ANON_KEY=public-anon-key

# Supabase 认证 & JWT
SUPABASE_JWT_SECRET=dev-jwt-secret
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=dev-nextauth-secret

# 大模型服务（示例：阿里云百炼）
# LLM_PROVIDER=bailian（默认）| openai（兼容 OpenAI / 百炼 compatible-mode）
LLM_PROVIDER=bailian
BAILIAN_API_KEY=your-bailian-api-key
# 默认使用阿里云原生接口，可改为 https://dashscope.aliyuncs.com/compatible-mode/v1
# （或其他兼容 OpenAI 的 /v1 基址，SDK 会自动补 /chat/completions）
BAILIAN_API_BASE_URL=https://dashscope.aliyuncs.com/api/v1/services/aigc/text-generation/generation
BAILIAN_MODEL=qwen-max
# 设置为 true/1/yes 可恢复历史的 LLM 行程兜底逻辑，默认关闭以保留模型真实输出
LLM_ENABLE_NORMALIZATION_FALLBACKS=false
# 打开后将在服务端输出 LLM 原始/归一化数据，便于调试 Schema 失败
LLM_DEBUG_STRUCTURED_OUTPUT=false

# 地图服务（示例：高德地图）
NEXT_PUBLIC_AMAP_KEY=your-amap-web-key
NEXT_PUBLIC_AMAP_SECURITY_CODE=
AMAP_REST_KEY=your-amap-rest-key

# 语音识别服务（默认使用 mock，可切换 iflytek/openai 等）
VOICE_RECOGNIZER_PROVIDER=mock
VOICE_RECOGNIZER_MOCK_TRANSCRIPT=
VOICE_RECOGNIZER_TIMEOUT_MS=45000
# 科大讯飞语音听写（流式 WebSocket 接口）
IFLYTEK_APP_ID=
IFLYTEK_API_KEY=
IFLYTEK_API_SECRET=
IFLYTEK_API_BASE_URL=wss://iat-api.xfyun.cn/v2/iat
IFLYTEK_DOMAIN=iat
IFLYTEK_LANGUAGE=zh_cn
IFLYTEK_ACCENT=mandarin
IFLYTEK_VAD_EOS=3000
# 设置为 wpgs 可启用动态中间结果，默认留空
IFLYTEK_DWA=
# 高级：如需微调分片与发送间隔，可修改下列参数
IFLYTEK_WS_CHUNK_SIZE=1280
IFLYTEK_WS_FRAME_INTERVAL_MS=40
# 兼容旧配置：若保留 IFLYTEK_ENGINE_TYPE，将作为 domain 兜底
IFLYTEK_ENGINE_TYPE=
# OpenAI 语音识别（Whisper/GPT-4o Transcribe，可选备用）
OPENAI_API_KEY=
OPENAI_API_BASE_URL=https://api.openai.com/v1
OPENAI_VOICE_MODEL=gpt-4o-mini-transcribe

# 通知相关（可选）
SMTP_HOST=
SMTP_PORT=465
SMTP_USER=
SMTP_PASS=
NOTIFY_BUDGET_THRESHOLD=0.8

# Playwright 测试绕过凭证（可选）
PLAYWRIGHT_BYPASS_AUTH=

# 行程意图解析埋点上报（可选，用于 sendBeacon 或日志代理）
NEXT_PUBLIC_TRIP_INTENT_ANALYTICS_ENDPOINT=

# 全局限流（毫秒 & 次数）
GLOBAL_API_RATE_LIMIT_WINDOW_MS=60000
GLOBAL_API_RATE_LIMIT_MAX=120
LLM_RATE_LIMIT_WINDOW_MS=60000
LLM_RATE_LIMIT_MAX=3
VOICE_RATE_LIMIT_WINDOW_MS=60000
VOICE_RATE_LIMIT_MAX=10
